input,subject,relation,object
随着新技术的不断涌现，知识问答技术取得了长足的进步，在工业界也有广泛的应用。,知识问答,属于,技术
本章介绍知识问答系统的基本概念、发展历史、评价体系以及最新进展。,知识问答系统,属于,基本概念、发展历史、评价体系以及最新进展
8.1知识问答概述知识问答系统是一个拟人化的智能系统，它接收使用自然语言表达的问题，理解用户的意图，获取相关的知识，最终通过推理计算形成自然语言表达的答案并反馈给用户。,知识问答系统,属于,智能系统
如果换一种思路，用户拿这个问题问身边的人，也许直接就会听到“纽约”这个答案。,问答问答系统,属于,用户问身边的人听到纽约这个答案
"8.1.1知识问答的基本要素知识问答或问答（Question_Answering,QA）是对话的一种形态。",知识问答,属于,"问答（Question_Answering,QA）"
也有工作将知识库编码到计算模型中，例如逻辑规则、机器学习模型和深度学习模型。,知识库,属于,将知识库编码到计算模型
但是搜索与知识问答有明显差异。,搜索,属于,知识问答
第二，搜索侧重更简单的用户体验，用户的知识检索诉求主要通过关键词而不是完整的句子，这样需要用户掌握一定的搜索技巧。,搜索,属于,简单的用户体验
例如同一个问题，大学教授和中学生会采用不同的搜索技巧和搜索关键词组合，而他们得到的搜索结果也会不一样。,搜索技巧和搜索关键词组合,属于,大学教授和中学生会采用不同的搜索技巧和搜索关键词组合
问答则会尝试理解不同自然语言表达方式中固有的语义，然后形成知识查询。,问答,属于,知识查询
第三，当用户的问题比较复杂，需要通过多个页面的知识来回答时，搜索是无法完成的。,搜索,属于,知识问答
数据库查询（Database_Query）同样可以帮助用户获取知识，但是知识问答和数据库查询仍然存在一定差异。,数据库查询,属于,知识问答
第二，数据库对知识库有严格限制，要求数据必须结构化存储。,数据库,属于,知识库
第三，数据库查询结果不一定能形成用户可使用的最终答案。,数据库查询结果,属于,形成用户可使用的最终答案
知识问答、信息检索和数据库查询的对比如表8-1所示。,知识问答,属于,信息检索
知识问答、信息检索和数据库查询的对比如表8-1所示。,信息检索,属于,数据库查询
案例1.知识问答可以直接嵌入搜索引擎的结果页面，将问答的答案与搜索的结果列表同时展示。,知识问答,属于,直接嵌入搜索引擎的结果页面，将问答的答案与搜索的结果列表同时展示
各种答题机器人和对话机器人也是知识问答的一个重要应用方向。,答题机器人,属于,知识问答
以阅读理解为代表的应用也可以被看作是知识问答的特例，它主要限制了知识库的边界（虽然阅读理解的主体知识是指定的章，但是实现理解仍然需要语法、常用词汇概念以及常识等辅助），而问题的形式可以是选择题（判断哪个答案正确）、填空题（直接填写答案）抑或是简答题。,知识问答,属于,以阅读理解为代表的应用
图8-5展示了一种阅读理解的应用场景，智能体以一段文章（passage）为知识库，针对问题从文章中寻找一段文字形成答案。,阅读理解,属于,应用场景
问答系统还有很多更深入的综述[10-14]。,问答系统,属于,更深入的综述
8.2.1问题类型与答案类型在知识问答中，首先可以通过对问题的类型（QuestionType）理解问答目标。,问题类型,属于,知识问答
问答系统可以针对问题类型，选择对应的知识库、处理逻辑来生成答案[15]。,问答系统,属于,针对问题类型，选择对应的知识库、处理逻辑来生成答案
通过对问题的类型（也就是用户问题所期望的答案的类型）的分析，问答系统可以有针对性地选择有效的知识库和处理逻辑解答一类问题。,问答系统,属于,有针对性地选择有效的知识库和处理逻辑解答一类问题
图8-6ISI_QA问题类型分类体系及实例后续也出现了基于功能的问题分类体系。,ISI_QA问题类型分类体系及实例,属于,问题分类体系及实例
但是在中文里，带有“怎么样”这个词的问题，其意图有可能是询问原因，也有可能是询问解决方式。,带有“怎么样”这个词的问题,属于,询问原因
但是在中文里，带有“怎么样”这个词的问题，其意图有可能是询问原因，也有可能是询问解决方式。,带有“怎么样”这个词的问题,属于,询问解决方式
BU等人[18]根据百度知道的数据，建立了一个基于功能（Function-Based）的问题分类体系。,BU等人,属于,基于功能的问题分类体系
（1）事实性客观问题。,SPO三元组,属于,事实性客观问题
特点是语法结构简单（拥有明确的主谓宾结构，不包括例如并列、否定等复杂结构）、语义结构清晰（通常是关于某个事物或事件的简单描述性属性或关系型属性，可以通过简单的数据库查询解答）。,简单句,属于,语法结构简单
这两种主要是返回某些对象，从查询的角度来看，类似于数据库的Select操作。,Elasticsearch查询,属于,返回某些对象
而对错型的问题更像SPARQL中的Ask类型的查询。,对错型的问题,属于,SPARQL中的Ask类型的查询
”④问推荐（RECOMMENDATION），例如“哪个歌手跟刘德华类似？”另外，问题类型并非问题理解中的唯一语义要素。,问推荐,属于,问题类型
一是领域相关的问答系统，只回答与选定领域相关的问题。,问答系统,属于,领域相关的问答系统
这一类系统相对专注，需要领域专家的深入参与，虽然问题覆盖面小，但是答案的正确率高。,问答系统,属于,专注
二是领域无关的问答系统，基于开放知识库回答任意问题。,问答系统,属于,领域无关问答系统
这一类系统答案虽然覆盖面大，但答案的正确率有限。,问答系统,属于,属于系统答案虽然覆盖面大，但答案的正确率有限。
开放域问答系统经常使用万维网数据（尤其是百科网站、社区问答等）作为数据源解答用户的问题。,开放问答系统,属于,万维网数据
从知识库的信息组织格式来看，知识库可以是基于文本表示，也可以采用其他组织形式。,知识库,属于,基于文本表示
从知识库的信息组织格式来看，知识库可以是基于文本表示，也可以采用其他组织形式。,知识库,属于,其他组织形式
第一，文本类知识库利用纯文本承载知识，也是最常见的知识组织形式。,文本类知识库,属于,纯文本承载知识
这类知识库不但支持基于搜索的问答系统，也可以与基于知识图谱的结构化抽取技术结合，支持基于语义查询的解决方案。,知识库,属于,基于搜索的问答系统
这类知识库不但支持基于搜索的问答系统，也可以与基于知识图谱的结构化抽取技术结合，支持基于语义查询的解决方案。,知识库,属于,基于知识图谱的结构化抽取技术
另外，常见问答对（FAQ）或社区问答也是知识问答（尤其是智能客服）最容易获取的知识，可以直接通过问题匹配帮助用户获取答案。,问答对,属于,知识问答
第二，半结构化或结构化的知识库。,半结构化或结构化的知识库,属于,第二
这一类知识库侧重知识的细粒度组织，利用结构体现知识的语义。,知识库,属于,细粒度组织
第四，知识库并不限定于文本、符号系统或多媒体，也可以利用可计算的机器学习模型承载。,知识库,属于,文本、符号系统或多媒体
例如近年来出现的端到端的问答系统可以直接使用分布式表示模型记录习得的知识。,端到端的问答系统,属于,分布式表示模型记录习得的知识
另外，知识库的存储访问机制也是知识问答需要考虑的因素。,知识问答的存储访问机制,属于,知识库的存储访问机制
知识问答的知识可以采用单一的集中数据存储（例如数据表、数据库），或者分布式存储（例如分布式数据、数据仓库），甚至是基于互联网的全网数据（例如Linked_Data）。,知识问答,属于,单一的集中数据存储
知识问答的知识可以采用单一的集中数据存储（例如数据表、数据库），或者分布式存储（例如分布式数据、数据仓库），甚至是基于互联网的全网数据（例如Linked_Data）。,知识问答,属于,分布式存储
知识问答的知识可以采用单一的集中数据存储（例如数据表、数据库），或者分布式存储（例如分布式数据、数据仓库），甚至是基于互联网的全网数据（例如Linked_Data）。,知识问答,属于,基于互联网的全网数据
8.2.3智能体类型智能体利用知识库实现推理。,智能体,属于,知识库实现推理
根据知识库表示形式的不同，目前的知识问答可以分为传统问答方法（符号表示）以及基于深度学习的问答方法（分布式表示）两种类型。,知识问答,属于,传统问答方法
根据知识库表示形式的不同，目前的知识问答可以分为传统问答方法（符号表示）以及基于深度学习的问答方法（分布式表示）两种类型。,知识问答,属于,基于深度学习的问答方法
如图8-8所示，首先将问句“姚明的老婆出生在哪里”通过语义解析转化为SPARQL查询语句。,问句“姚明的老婆出生在哪里”,属于,语义解析
这个例子中的难点是将问句中的“老婆”映射到知识图谱中的关系“配偶”，这也是传统的知识库问答研究的核心问题之一；再从知识库（知识图谱）中查询，得到问题的答案“上海”。,问句中的“老婆”,属于,将问句中的“老婆”映射到知识图谱中的关系“配偶”
不同于传统方法，基于分布式表示的知识库问答利用深度神经网络模型，将问题与知识库中的信息转化为向量表示，通过相似度匹配的方式完成问题与答案的匹配。,基于分布式表示的知识库问答,属于,深度神经网络模型
BASEBALL系统回答了有关一年内棒球比赛的问题。,BASEBALL系统,属于,回答有关一年内棒球比赛的问题
LUNAR在阿波罗月球任务期间提供了岩石样本分析数据的界面。,LUNAR,属于,阿波罗月球任务期间提供了岩石样本分析数据的界面
这些系统一般限定在特定领域，使用自然语言问题询问结构化知识库。,问答系统,属于,特定领域，使用自然语言问题询问结构化知识库
这些数据库与如今讲的关系数据库不同，更像基于逻辑表达式的知识库。,数据库,属于,基于逻辑表达式的知识库
如图8-10所示为早期NLIDB型问答系统的设计思想。,早期NLIDB型问答系统,属于,设计思想
基于模式匹配的语义理解可以直接将问题映射到查询。,基于模式匹配的语义理解,属于,语义查询
如图8-11所示，例子“...capital...<country>.....”中，变量“<country>”用来表示Country类型的一个实体，例如Italy，而“capital”是一个字符串。,<country>,属于,Country类型的一个实体
图8-11基于模板匹配的NLIDB解决方案[23]（2）基于语法解析（Syntactic-Parsing）。,基于模板匹配的NLIDB解决方案,属于,基于语法解析（Syntactic-Parsing）
基于语法解析的语义理解将自然语言的复杂语义转化为逻辑表达式。,基于语法解析的语义理解,属于,语义理解
如图8-12所示为展示了LUNAR系统利用语法树解析初步解析问题。,LUNAR系统,属于,语法树解析初步解析问题
句法分析器的树状结果仍然需要人工生成的语义规则和领域知识来理解，进而转化成一种中间层的逻辑表达式。,句法分析器的树状结果,属于,语义规则和领域知识来理解进而转化成一种中间层的逻辑表达式
这种中间表示语言承载了高层次世界概念以及用户问题的含义，独立于数据库存储结构，可以进一步转换成数据查询的表达式从而获取答案。,中间表示语言,属于,高层次世界概念以及用户问题的含义
另外，当词汇具有多重词性时，也存在潜在问题。,词汇的潜在问题,属于,当词汇具有多重词性时，也存在潜在问题。
所以，还需要附加一些规则调整语法解析出来的查询。,SPO,属于,语法解析出来的查询
"图8-12LUNAR系统利用语法树解析初步解析问题[23]8.3.2IRQA：基于信息检索的问答系统基于信息检索的问答系统（Information_Retrieval_based_Question-Answering_System,IRQA）[6]的核心思想是根据用户输入的问题，结合自然语言处理以及信息检索技术，在给定文档集合或者互联网网页中筛选出相关的文档，从结果文档内容抽取关键文本作为候选答案，最后对候选答案进行排序返回最优答案。",基于信息检索的问答系统,属于,"基于信息检索的问答系统基于信息检索的问答系统（Information_Retrieval_based_Question-Answering_System,IRQA）"
（2）段落检索与排序（Passage_Retrieval_And_Ranking）。,段落检索与排序,属于,SPO三元组
（3）答案处理（Answer_Processing）。,答案处理,属于,SPO三元组
此方法以文档为知识库，没有预先的知识抽取工作。,知识问答,属于,没有预先的知识抽取工作。
通过本体可以将用户问题映射到基于概念拓扑图表示的查询表达式，也就对应了知识图谱中某种子图。,查询表达式,属于,本体将用户问题映射到基于概念拓扑图表示的查询表达式
KBQA的核心问题Question2Query是找到从用户问题到知识图谱子图的最合理映射。,Question2Query,属于,找到从用户问题到知识图谱子图的最合理映射
（1）问题分析。,SPO,属于,问题分析
（2）词汇关联。,词汇关联,属于,概念/产品
"例如“cities”映射到实体分类“城市”,“is_married果）。",“cities”,属于,实体分类“城市”
to”映射到关系“spouse”。,to,属于,spouse
也包括一些多义词，例如“Apple”（公司还是水（3）歧义消解。,多义词,属于,“Apple”
一方面是对候选的词汇、查询表达式排序选优，一方面通过语义的容斥关系去掉不可能的组合。,候选的词汇、查询表达式排序选优,属于,对候选的词汇、查询表达式排序选优
（4）构建查询。,SPO,属于,构建查询。
基于问题解析结果，可以通过自定义转化规则或者特定（语义模型+语法规则）将问题转化为查询语言表达式，形成对知识库的查询。,基于问题解析结果,属于,将问题转化为查询语言表达式，形成对知识库的查询
QALD的大多系统使用SPARQL表达查询。,QALD,属于,SPARQL表达查询
注意查询语言不仅能表达匹配子图的语义，还能承载一些计算统计功能（average、count函数）。,注意查询语言,属于,表达匹配子图的语义，还能承载一些计算统计功能（average、count函数）。
FAQ与CQA都是以问答对来组织知识，而且问答对的质量很高，不但已经是自然语言格式，而且受到领域专家或者社区的认可。,FAQ,属于,问答对组织知识
基于FAQ-QA的核心是计算问题之间的语义相似性。,基于FAQ-QA的核心,属于,计算问题之间的语义相似性
"重复问题发现（DuplicateQuestion_Detection,DQD）仅限于疑问句，这是短文本相似度计算的一个特例。",重复问题发现,属于,短文本相似度计算的一个特例
事实上，语义相似性面临两个挑战：（1）“泛化”。,语义相似性,属于,挑战
（2）“歧义”。,“歧义”,属于,SPO
语义相似度计算一直是NLP研究的前沿。,语义相似度计算,属于,NLP研究的前沿
发现基于深度学习的方法在领域问题上效果显著，但是开放领域问题中效果与传统方法接近（甚至有所下降）。,基于深度学习的方法,属于,领域问题效果显著
主要是理解问题的类型，解析问题语义元素等。,spo,属于,理解问题的类型
（2）候选答案生成（Candidate_Answer_Generation）。,候选答案生成,属于,信息检索
不仅从网络上搜索相关文档并抽取答案，还从知识库直接查询答案，然后合并构成答案候选集。,抽取答案,属于,从知识库直接查询答案，然后合并构成答案候选集。
（3）候选答案评分（Candidate_Answer_Scoring）。,候选答案评分,属于,SPO三元组抽取
针对每个候选答案选取一些重要特征，并对各个特征打分并形成答案的特征向量。,答案的特征向量,属于,针对每个候选答案选取一些重要特征，并对各个特征打分
（4）答案融合及排序（Confidence_Merging_And_Ranking）。,答案融合及排序,属于,概念/产品
2.QALD-Hybrid-QA:KBQA主导的混合框架在QALD-6启动的Hybrid_QA要求KBQA可以同时利用知识图谱数据和文本数据。,QALD-Hybrid-QA,属于,混合框架在QALD-6启动的Hybrid_QA要求KBQA可以同时利用知识图谱数据和文本数据。
自然语言先转化为SPARQL查询，但是并非所有SPARQL查询中的三元组特征（TriplePattern）都可以对应到知识图谱中的词汇，也并非所有知识都可以从掌握的知识图谱中查到，有一部分知识还需要从文档中抽取关系得到解答。,SPARQL查询中的三元组特征（TriplePattern）,属于,知识图谱中的词汇
这样可以避免前期过度的文本抽取工作，也能适应现实中更常见的图谱和文本混合的知识库。,知识图谱,属于,前期过度的文本抽取工作
这样可以避免前期过度的文本抽取工作，也能适应现实中更常见的图谱和文本混合的知识库。,知识图谱,属于,适应现实中更常见的图谱和文本混合的知识库
注意，在OpenIE抽取的三元组中，大量谓语predicate是没有经过归一融合的。,OpenIE,属于,归一融合
例如，“front_man_of”映射到“lead_vocalist_of”上。,“front_man_of”,属于,“lead_vocalist_of”
例如，“front_man_of”映射到“lead_vocalist_of”上。,“front_man_of”,等价,“lead_vocalist_of”
模块化的流水线设计有利于将复杂的QA系统分解为细粒度可优化的部分，而且形成了可插拔的体系，便于系统优化更新。,模块化的流水线,属于,将复杂的QA系统分解为细粒度可优化的部分，而且形成了可插拔的体系，便于系统优化更新
"（2）实体关系映射（Relation_Linking,RL）。",实体关系映射,属于,"Relation_Linking,RL"
将问题文本提及的关系映射到知识库的实体属性或实体关系上。,将问题文本提及的关系映射到知识库的实体属性或实体关系上。,属于,概念/产品
"（3）实体分类映射（Class_Linking,CL）。",实体分类映射,属于,分类映射
将问题所需答案的类型映射到知识库的实体分类上。,问题所需答案的类型,属于,映射到知识库的实体分类上
"（4）构建查询（Query_Building,QB）。",构建查询,属于,Query_Building
基于上述语义理解的结果综合后形成SPARQL查询。,SPARQL查询,属于,基于上述语义理解的结果综合
如图8-17所示，对于“What_is_the_capital_of_Canada?”，理想的NED组件应该将关键字“Canada”识别为命名实体，并将其映射到相应的DBpedia资源，即dbr:Canada。,NED组件,属于,将关键字“Canada”识别为命名实体，并将其映射到相应的DBpedia资源，即dbr:Canada
然后，RL模块需要找到知识图谱中对应的实体关系，因此“capital”映射到dbo:capital。,“capital”,属于,dbo:capital
答案评价通常可以从如下角度考虑：（1）正确性。,答案评价,属于,正确性
答案是否正确地回答了问题，例如问美国总统是谁，回答“女克林顿”就错了。,答案,属于,回答错误
（2）精确度。,精确度,属于,SPO
（3）完整性。,完整性,属于,SPO三元组
例如，列举美国总统，应该把所有满足条件的人都列举出来。,列举美国总统,属于,把所有满足条件的人都列举出来
（4）可解释性。,SPO,属于,可解释性
在给出答案的同时，也给出引文或证明说明答案与问题的关联。,给出答案,属于,给出引文或证明说明答案与问题的关联
根据TREC的测试结果，考虑与未考虑文章支持度的测试结果差距可达十几个百分点。,考虑与未考虑文章支持度的测试结果差距,属于,TREC的测试结果
（5）用户友好性。,用户友好性,属于,SPO三元组
答案质量由人工评分，很多非事实性问题并非一个唯一的答案，所以需要人工判定答案的质量。,答案质量,属于,人工评分
（6）额外的评价维度。,额外的评价维度,属于,概念/产品
问答系统对用户输入或者请求做出反应的时间。,问答系统,属于,反应时间
问答系统的响应时间是评价系统性能的一个非常重要的指标，如果响应时间过长，会使系统的可用性很低。,问答系统的响应时间,属于,评价系统性能
一般问答系统的响应时间应控制在1s以内。,问答系统,属于,响应时间
（2）问答系统的故障率（Error_Rate）。,问答系统的故障率,属于,Error_Rate
在限定时间内给出答案即可，不考虑答案是否正确。,SPO,属于,限定时间内给出答案
系统返回错误或者系统运行过程中发生错误数的统计。,系统错误统计,属于,系统返回错误或者系统运行过程中发生错误数的统计。
此评价体系主要针对基于搜索的问答解决方案（IRQA）。,评价体系,属于,基于搜索的问答解决方案（IRQA）
问题集主要来自搜索引擎的查询日志（也有少部分问题由人工设计）。,问题集,属于,搜索引擎的查询日志
问题集主要来自搜索引擎的查询日志（也有少部分问题由人工设计）。,问题集,属于,人工设计
知识库主要采用跨度几年的主流媒体的新闻。,知识库,属于,主流媒体的新闻
评价方法主要是选取大约1000个测试问题，由1～3人标注评价答案的正确性（答案是否正确回答了问题）、精准度（答案中是否包含多余的内容）以及对应文章的支持度（对应的文章是否支持该答案）。,评价方法,属于,选取大约1000个测试问题，由1～3人标注评价答案的正确性（答案是否正确回答了问题）、精准度（答案中是否包含多余的内容）以及对应文章的支持度（对应的文章是否支持该答案）
2.TREC_LIVE_QA：评价CQA社区问答TREC_LIVE_QA也[37]是美国标准计量局在2015—2107年从更真实的网络问答出发，主要面向CQA社区问答解决方案的评价体系。,TREC_LIVE_QA,属于,评价体系
知识库主要来自Yahoo_Answer的社区问答数据，以及过往标注的千余条数据。,知识库,属于,Yahoo_Answer的社区问答数据
知识库主要来自Yahoo_Answer的社区问答数据，以及过往标注的千余条数据。,知识库,属于,过往标注的千余条数据
评价方法主要选取大约1000个测试问题，每个问题要求在1min内回答。,评价方法,属于,大约1000个测试问题，每个问题要求在1min内回答
"由于问题类型不限于简单知识问答，所有的答案由1～3人标注并直接按答案质量打{0,1,2,3}分。",问答评分系统,属于,"由1～3人标注并直接按答案质量打{0,1,2,3}分"
另外，评价系统也针对测试问题，获取赛后的社区人工答案做类似的评价，然后对比自动生成的答案和人工产生的答案的体验差异。,评价系统,属于,针对测试问题获取赛后的社区人工答案做类似的评价
QALD的主要任务如下：给定知识库（一个或多个RDF数据集以及其他知识源）和问题（自然语言问题或关键字），返回正确的答案或返回这些答案的SPARQL查询。,QALD,属于,给定知识库（一个或多个RDF数据集以及其他知识源）和问题（自然语言问题或关键字），返回正确的答案或返回这些答案的SPARQL查询
这些海量数据分布在不同的数据集之间，并且它们是异构的、有噪声的，甚至结构是不一致的。,数据集,属于,分布在不同的数据集之间
SQuAD评价指标主要分两部分：（1）精准匹配。,SQuAD评价指标,属于,精准匹配
正确匹配标准答案，目前效果最好的算法达到74.5%，人类表现是82.3%。,算法,属于,目前效果最好的算法
这个指标准确地匹配任何一个基本事实答案的预测百分比。,这个指标准确地匹配任何一个基本事实答案的预测百分比。,属于,SPO三元组
（2）F1值。,F1值,属于,信息检索性能指标
这个指标衡量了预测和基本事实答案之间的平均重叠数。,指标的五大用途,属于,衡量了预测和基本事实答案之间的平均重叠数
在给定问题的F1，然后对所有问题求平均值。,F1,属于,给定问题的F1
在此之前，斯坦福大学还发布过Web_Question数据集[41]。,斯坦福大学问答数据集,属于,Web_Question数据集
这个数据集主要用于验证社区问答或FAQ问答的语义相似度计算算法，目前在Kaggle上的竞赛结果最优者的Logloss已经达到0.11。,语义相似度计算算法,属于,验证社区问答或FAQ问答的语义相似度计算算法
2018的Sameval比赛包含12个任务，主要包括以下几方面的内容：（1）推特情感与创造性语句分析。,Sameval比赛,属于,12个任务
（2）实体关联。,实体关联,属于,概念/产品
该部分包含两个子任务。,该部分,属于,子任务
一个子任务是多人对话中的人物识别，目标是识别对话中提及的所有人物。,一个子任务,属于,多人对话中的人物识别
值得一提的是，这些人物并不一定是对话中的某个谈话者，可能是他们提及的其他人。,人物,属于,对话中的某个谈话者
如图8-18所示的多人对话场景，Ross提到的“mom”并不是参与对话的某人，而是Judy。,Ross,属于,多人对话场景
该部分介绍的信息抽取包含关系（关系抽取与分类）、时间（基于语义分析的时间标准化）等。,信息抽取,属于,关系（关系抽取与分类）、时间（基于语义分析的时间标准化）
图8-19时间信息的语义解析示例（4）词汇语义学。,时间信息的语义解析,属于,词汇语义学
红色是苹果的一个颜色属性，但是与香蕉无关。,红色,属于,苹果的颜色属性
（5）阅读理解与推理。,阅读理解与推理,属于,SPO三元组
8.5KBQA前沿技术目前还存在两个很大的困难阻碍着KBQA系统被广泛应用。,8.5KBQA前沿技术,属于,阻碍着KBQA系统被广泛应用
一个困难是现有的自然语言理解技术在处理自然语言的歧义性和复杂性方面还显得比较薄弱。,自然语言理解技术,属于,处理自然语言的歧义性和复杂性方面还显得比较薄弱
例如，有时候一句话系统可以理解，但是换一个说法就不能理解了。,一句话系统,属于,理解能力
另一个困难是此类系统需要大量的领域知识来理解自然语言问题，而这些一般都需要人工输入。,此类系统,属于,需要大量的领域知识来理解自然语言问题
这些工作都是非常消耗人力的。,信息检索,属于,信息检索的五大用途
以下围绕KBQA的关键阶段——“构建查询”，说明KBQA面临的挑战，然后介绍几种典型的解决方案。,KBQA的关键阶段——“构建查询”,属于,构建查询面临的挑战
这个过程中的主要挑战在于如何将自然语言表达映射到知识库的查询，也就是Question2Query语义理解。,Question2Query,属于,将自然语言表达映射到知识库的查询
这需要有动态知识抽取解决方案。,动态知识抽取,属于,解决方案
其次，知识库的知识组织机制各不相同，同样的知识在不同的知识库中未必会采用同样的结构，例如三元组（英国，加入欧盟的时间，1973）等价于四个三元组（事件1，加入方，英国）（事件1，被加入方，欧盟）（事件1，年份，1973）（事件1，类型，加入组织），这样也为查询制造了困难。,三元组,属于,知识组织机制
其次，知识库的知识组织机制各不相同，同样的知识在不同的知识库中未必会采用同样的结构，例如三元组（英国，加入欧盟的时间，1973）等价于四个三元组（事件1，加入方，英国）（事件1，被加入方，欧盟）（事件1，年份，1973）（事件1，类型，加入组织），这样也为查询制造了困难。,三元组（英国，加入欧盟的时间，1973）,等价,四个三元组（事件1，加入方，英国）（事件1，被加入方，欧盟）（事件1，年份，1973）（事件1，类型，加入组织）
最后，知识库本身并不是完整的，而用户的预期却是希望能找到答案，这样如何判定找不到答案从而避免答非所问也是很重要的。,知识问答,属于,找不到答案从而避免答非所问
3.泛化语义理解的预期当用户使用知识问答时，常见的抱怨就是同一个问题换一种说法就无法理解了。,泛化语义理解的预期,属于,知识问答
这个问题在智能客服中尤其明显，在保障精确度的前提下智能客服应该匹配尽量可解答的问题。,智能客服,属于,保障精确度的前提下智能客服应该匹配尽量可解答的问题
泛化问题通常可以从词语和句子两个层面来研究。,泛化问题,属于,词语和句子两个层面来研究
（1）词语层面的泛化匹配[44]。,词语层面的泛化匹配,属于,泛化匹配
②生成实体（日期，地址等）的不同说法。,生成实体（日期，地址等）的不同说法。,属于,SPO三元组
例如“2018年1月1日”和“2018年元旦”。,“2018年1月1日”,属于,时间
例如“2018年1月1日”和“2018年元旦”。,“2018年元旦”,属于,时间
注意，生成实体的识别和解析可以通过常规的语法分析工具达成，但是中英文数字的混合、语音识别错误等现象会令解析难度提升。,生成实体的识别和解析,属于,常规的语法分析工具
③实体分类和属性或关系的不同说法。,实体分类,属于,属性的不同说法
③实体分类和属性或关系的不同说法。,实体分类,属于,关系的不同说法
（2）句子层面的泛化处理。,句子层面的泛化处理。,属于,信息检索
这样简化了问题分析的步骤，并且通过预制的查询模板替代了本体映射。,SPO查询器,属于,简化问题分析步骤
这个方案在工业中得到广泛的应用。,这个方案,属于,工业中得到广泛的应用
根据模板匹配结果生成多组可能的SPARQL查询，通过筛选这些查询，最终生成答案并返回给用户。,根据模板匹配结果生成多组可能的SPARQL查询,属于,生成答案并返回给用户
TBSL中的模板定义为SPARQL查询模板。,TBSL中的模板,属于,SPARQL查询模板
模板生成步骤解析问句结构并生成对应的SPARQL查询模板，该查询模板中可能包含过滤和聚合操作。,模板生成步骤,属于,解析问句结构并生成对应的SPARQL查询模板
在此基础上，需要检查查询的实体类型。,查询的实体类型,属于,检查查询的实体类型
模板实例化步骤将自然语言问句与知识库中的本体概念建立映射。,模板实例化步骤,属于,将自然语言问句与知识库中的本体概念建立映射
对于属性标签，还需要与存储在模式库中的自然语言表示进行比较。,属性标签,属于,与存储在模式库中的自然语言表示进行比较
最高排位的实体将作为填充查询槽位的候选答案。,最高排位的实体,属于,填充查询槽位的候选答案
1.问题“列举所有的电影出品人”2.模板生成3.资源绑定TBSL仍然存在的缺点是创建的模板结构未必和知识图谱中的数据契合。,TBSL,属于,模板生成
离线过程（Offline_Procedure）侧重基于问题生成模板。,离线过程,属于,基于问题生成模板
此外，复杂的问题可以利用语法分析技术，先将问题拆分为多个BFQ，然后再到本体中逐个映射到属性，最后再从这些结果中挑选合理的组合。,本体中概念的映射,属于,语法分析技术
"离线过程采用E-M方法计算条件概率分布P（p|t）,p为属性，t为模板。",E-M方法,属于,计算条件概率分布P（p|t）
在线过程（Online_Procedure）侧重模板选择。,在线过程,属于,在线模型的五大用途
通过概率计算给定问题的最优答案。,给定问题的最优答案,属于,概率计算
要注意的是，这里还包括高效率的内存知识图谱查询引擎。,高效率的内存知识图谱查询引擎,属于,SPO三元组查询引擎
这种基于BFQ模板的解决方案提升了自动化处理程度，基于2782个意图从语料中学习生成了2700万个模板。,基于BFQ模板的解决方案,属于,提升自动化处理程度
当然，BFQ也未必能覆盖用户的所有问题。,BFQ,属于,覆盖用户的所有问题
如果为了尽可能匹配上一个问题的多种不同表述，则需要建立庞大的模板库，耗时耗力且会降低查询效率。,模板匹配,属于,建立庞大的模板库
8.5.3基于语义解析的方法基于语义解析的方法是指通过对自然语言查询的语法分析，将查询转换成逻辑表达式，然后利用知识库的语义信息将逻辑表达式转换成知识库查询，最终通过查询知识库得到查询结果。,基于语义解析的方法,属于,知识问答系统
逻辑表达式是语义解析方法与基于模板的方法的主要差异。,逻辑表达式,属于,语义解析方法
逻辑表达式是面向知识库的结构化查询，用于查找知识库中的实体及实体关系等知识。,逻辑表达式,属于,面向知识库的结构化查询
自然语言转化逻辑表达式需要训练一个语法分析器将过程自动化。,自然语言转化逻辑表达式,属于,训练一个语法分析器将过程自动化
应注意两个关键步骤：资源映射和逻辑表达式生成。,资源映射,属于,两个关键步骤
简单映射是指字符形式上比较相似的，一般可以通过字符串相似度匹配来找到映射关系，例如“出生”和“出生地”的映射。,简单映射,属于,字符形式上比较相似的映射
逻辑表达式生成即自底向上自动地将自然语言查询解析为语法树，语法树的根节点即是最终对应的逻辑表达式。,逻辑表达式生成,属于,自底向上自动地将自然语言查询解析为语法树
如图8-24所示，查询“where_was_Obamaborn”对应的逻辑表达式是Type.Location⊓PeopleBornHere.BarackObama，其中lexicon是指资源映射操作，PeopleBornHere和BarackObama用Join连接组合，此组合结果再与Type.Location用求交集组合成为最终的逻辑表达式。,查询“where_was_Obamaborn”对应的逻辑表达式,属于,Type.Location⊓PeopleBornHere.BarackObama
此方法不需要逻辑表示式的专家人工标注数据，可以低成本地获得。,SPO,属于,不需要逻辑表示式的专家人工标注数据，可以低成本地获得
（1）资源映射。,资源映射,属于,概念/产品
如图8-25所示，左边的“grew_up_in”是三元组中的自然语言关系短语r1，右边的“DateOfBirth”是知识库中的关系r2。,r1,属于,三元组中的自然语言关系短语r1
通过比较集合F(r1)和集合F(r2)类似Jaccard距离特征确定是否建立r1与r2的资源映射。,F(r1),属于,通过比较集合F(r1)和集合F(r2)类似Jaccard距离特征确定是否建立r1与r2的资源映射。
图8-25关系短语映射到知识库关系的方法[41]（2）桥接操作。,图8-25关系短语映射到知识库关系的方法,属于,桥接操作
这样就需要补充一个额外的二元关系将这些词两端的逻辑表达式连接起来，这就是桥接操作。,桥接操作,属于,补充额外的二元关系
由于知识库中的关系是有定义域和值域的，所以文献基于此特点在知识库中查找所有潜在的关系，例如Education的定义域和值域分别是Person和University，则Education可以是候选的桥接操作。,桥接操作,属于,查找所有潜在的关系
图8-26桥接操作示例[41]（3）组合操作。,桥接操作,属于,组合操作
即逻辑表达式间的连接、求交集以及聚合三种操作。,spo,属于,逻辑表达式间的连接、求交集以及聚合三种操作。
至于最终应该用哪种操作，作者同样通过收集大量的上下文特征，基于这些训练分类器，用于最后的候选逻辑表达式评估。,作者,属于,通过收集大量的上下文特征，基于这些训练分类器，用于最后的候选逻辑表达式评估
（4）候选逻辑表达式评估。,候选逻辑表达式评估,属于,SPO三元组
即训练一个分类器，计算每一种候选逻辑表达式的概率，DiscriminativeLog-Linear模型，最终实现逻辑表达式的筛选。,DiscriminativeLog-Linear模型,属于,训练一个分类器，计算每一种候选逻辑表达式的概率
下面通过Yih[51]的工作，说明如何使用深度神经网络来提升知识问答的效果。,Yih,属于,使用深度神经网络来提升知识问答的效果
传统的基于语义解析的方法需要将问题转换成逻辑表达式，如图8-27所示。,传统的基于语义解析的方法,属于,将问题转换成逻辑表达式
图8-28查询图示例[51]下面介绍查询图的生成过程。,查询图,属于,生成过程
第一步，选择一个主题实体（Topic_Entity）作为根节点，如图8-29（a）中可以选择s1“FamilyGuy”作为根节点。,主题实体,属于,选择一个主题实体（Topic_Entity）作为根节点
第二步，确定一条从根节点到Lambda变量（答案节点）的有向路径，路径上可以有一个或者多个中间变量，这条路径被称为核心推断链（Core_Inferential_Chain），如图8-29（b）所示从三条路径s3、s4、s5中选取s3作为核心推断链。,核心推断链,属于,从三条路径s3、s4、s5中选取s3作为
核心推断链上除了根节点为实体，其他的都只能是变量，节点间的关系都是知识库中的关系。,核心推断链,属于,实体
"第三步，给查询图添加约束条件和聚合函数（AugmentingConstraints&Aggregations），形式上就是把其他的实体或者聚合函数节点通过知识库中的关系与核心推断链上的变量连接起来，如图8-29（c）所示对y增加两个限制argmin和character(y,MegGriffin)。",核心推断链,属于,添加约束条件和聚合函数
首先根据问题中的主题词在知识库中确定候选答案，然后把问题和知识库中的候选答案都通过神经网络模型映射到一个低维空间，得到它们的分布式向量（Distributed_Embedding），则可计算候选答案分布式向量与问题向量的相似度得分，找出相似度最高的候选答案作为最终答案。,知识问答,属于,向量相似度
该神经网络模型通过标注数据对进行训练，使得问题向量与知识库中正确答案的向量在低维空间的关联得分尽量高。,神经网络模型,属于,对进行训练
如图8-31所示，自底向上计算。,自底向上计算,属于,SPO三元组
第一步，利用实体链接定位问题中的核心实体，对应到Freebase的实体；第二步，找到从问题中核心实体到候选答案实体的路径；第三步，生成候选答案的子图；第四步，分别将问题和答案子图映射成Embedding向量；第五步，进行点积运算，获得候选答案和问题之间的匹配度。,SPO三元组抽取,属于,实体链接定位问题中的核心实体
"该方法取得了比Berant[41]更好的结果（F1=0.392,P@1=0.40）。",SPO,属于,抽取三元组
"这三个CNN被称为多列卷积神经网络（Multi-Column_Convolutional_Neural_Network,Multi-Column_CNN）。",多列卷积神经网络,属于,多列CNN
"在实验中，该方法取得了当时最好的效果（F1=0.408,P@1=0.45)。",交叉验证,属于,取得当时最好的效果
两个案例的基本框架一致，而知识问答增加了将自然语言问题转化为对应逻辑表达式以及查询语句的过程。,知识问答,属于,将自然语言问题转化为对应逻辑表达式以及查询语句的过程
注意，真实的知识问答系统的语义理解远比本文方案复杂。,知识问答系统的语义理解,属于,真实的知识问答系统的语义理解
从自然语言问题中识别出实体名、属性名和属性值等三类要素，并将实体名和属性名映射到知识库中的实体和属性。,从自然语言问题中识别出实体名、属性名和属性值等三类要素,属于,识别实体名、属性名和属性值
首先，实体和属性的识别可以采用词典的方法，例如从知识库中抽取所有的实体名和属性名，构建分词器的自定义词典。,实体和属性的识别,属于,词典的方法
然后，对自然语言问题进行分词，可直接识别其中的属性名和实体名。,分词,属于,直接识别属性名和实体名
例如下面的两段代码，分别实现了属性名识别和实体名识别。,属性名识别,属于,SPO三元组
（3）后生成逻辑表达式。,后生成逻辑表达式,属于,SPO三元组
逻辑表达式生成流程如下：查询中含有实体名。,逻辑表达式生成流程,属于,查询中含有实体名
工业应用中抽取属性也会采用文法解析器、序列化标注、数字识别与解析等技术。,文法解析器,属于,工业应用中抽取属性
在生成逻辑表达式之后，可基于查询的类型及要素，直接用对应的Elasticsearch查询模板将逻辑表达式翻译成Elasticsearch查询。,Elasticsearch查询模板,属于,生成逻辑表达式
本方法定义了一组Elasticsearch查询模板，基于该模板将逻辑表达式按照一定的层次结构自动转换成Elasticsearch查询语句。,本方法,属于,Elasticsearch查询模板
gAnswer系统[55]是一个基于海量知识库的自然语言问答系统，针对用户的自然语言问题，能够输出SPARQL格式的知识库查询表达式以及查询答案的结果。,gAnswer系统,属于,基于海量知识库的自然语言问答系统
gAnswer同时支持中文问答和英文问答。,gAnswer,属于,中文问答和英文问答
gAnswer参加了QALD-9的评测比赛，并取得了第一名的成绩。,gAnswer,属于,QALD-9的评测比赛
对于中文问答，使用PKUBASE知识库；对于英文问答，使用DBpedia知识库。,PKUBASE,属于,中文问答
本实践的相关工具、实验数据及操作说明由OpenKG提供，地址为http://openkg.cn。,本实践,属于,OpenKG
如图8-33所示为gAnswer系统处理流程。,gAnswer系统处理流程,属于,问答系统
在查询执行阶段，借助gStore系统返回的SPARQL查询结果，返回并展示给用户。,查询执行阶段,属于,gStore系统返回的SPARQL查询结果，返回并展示给用户。
gAnswer系统的运行需要借助支持SPARQL查询的图数据库系统来获取最终答案。,gAnswer系统,属于,支持SPARQL查询的图数据库系统来获取最终答案
在目前的版本中，使用gStore系统（http://openkg.cn/tool/gstore）。,gStore,属于,目前版本的系统
gAnswer的部署还依赖一些外部工具包。,gAnswer,属于,部署
包括Maltparser、StanfordNLP，在生成SPARQL阶段，需要借助Lucene对辅助信息进行索引。,Lucene,属于,生成SPARQL阶段，需要借助索引
KBQA作为知识问答的重要分支，一方面强化了针对结构化信息的检索能力，另一方面也可以利用知识图谱提升问题理解的准确性。,KBQA,属于,知识问答
